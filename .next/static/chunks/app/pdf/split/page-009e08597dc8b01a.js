(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[620],{2432:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(5155),a=r(2115),i=r(2896),n=r(5299);function l(e){let{file:t,pageNumber:r=1,width:l=150,height:c=200,className:d=""}=e,o=(0,a.useRef)(null),[m,u]=(0,a.useState)(!0),[h,f]=(0,a.useState)(null),{pdfDoc:x,loading:p,error:g}=(0,i.De)(t),j=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=!0;async function t(){if(x&&o.current)try{u(!0),f(null);let t=await x.getPage(r),s=o.current;if(!s||!e)return;let a=s.getContext("2d");if(!a)return;let i=t.getViewport({scale:1}),n=Math.min(l/i.width,c/i.height),d=t.getViewport({scale:n});s.width=d.width,s.height=d.height,j.current=t.render({canvasContext:a,viewport:d}),await j.current.promise,e&&u(!1)}catch(t){if((null==t?void 0:t.name)==="RenderingCancelledException")return;console.error("Error rendering PDF page:",t),e&&(f("Failed to render page"),u(!1))}}return x&&t(),()=>{if(e=!1,j.current)try{j.current.cancel()}catch(e){}}},[x,r,l,c]);let b=p||m,v=g||h;return(0,s.jsxs)("div",{className:"relative bg-muted rounded-md overflow-hidden ".concat(d),style:{width:l,height:c},children:[b&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)(n.A,{className:"h-6 w-6 animate-spin text-muted-foreground"})}),v&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center p-2",children:(0,s.jsx)("p",{className:"text-xs text-center text-destructive",children:v})}),(0,s.jsx)("canvas",{ref:o,className:"max-w-full max-h-full ".concat(b||v?"opacity-0":"opacity-100")})]})}},2761:(e,t,r)=>{Promise.resolve().then(r.bind(r,6280))},2896:(e,t,r)=>{"use strict";r.d(t,{De:()=>l,n4:()=>d,zm:()=>c});var s=r(2115);let a=new Map;function i(e){return"".concat(e.name,"-").concat(e.size,"-").concat(e.lastModified)}async function n(e,t){let{getPdfJs:s}=await Promise.resolve().then(r.bind(r,8728)),i=await s(),n=await e.arrayBuffer(),l=i.getDocument({data:n}),c=await l.promise,d=a.get(t);return d&&(d.document=c),c}function l(e){let[t,r]=(0,s.useState)(null),[l,c]=(0,s.useState)(null),[d,o]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let t=!0;return async function(){let s=i(e);try{o(!0),c(null);let i=a.get(s);i||(i={promise:n(e,s),document:null},a.set(s,i));let l=await i.promise;t&&(r(l),o(!1))}catch(e){console.error("Error loading PDF document:",e),console.error("Error details:",{message:e instanceof Error?e.message:String(e),stack:e instanceof Error?e.stack:void 0,name:e instanceof Error?e.name:void 0}),a.delete(s),t&&(c(e instanceof Error?e.message:"Failed to load PDF"),o(!1))}}(),()=>{t=!1}},[e]),{pdfDoc:t,loading:d,error:l}}async function c(e){let t=i(e),r=a.get(t);return r||(r={promise:n(e,t),document:null},a.set(t,r)),(await r.promise).numPages}function d(e){let t=i(e),r=a.get(t);if(null==r?void 0:r.document)try{r.document.destroy()}catch(e){}a.delete(t)}},6280:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>S});var s=r(5155),a=r(2115),i=r(63),n=r(1972),l=r(5209),c=r(3209),d=r(7003),o=r(6170),m=r(8162),u=r(5917),h=r(5016);let f=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(m.bL,{ref:t,className:(0,h.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...a,children:(0,s.jsx)(m.C1,{className:(0,h.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(u.A,{className:"h-4 w-4"})})})});f.displayName=m.bL.displayName;var x=r(5626),p=r(1786),g=r(5229),j=r(5299),b=r(2024),v=r(8728),N=r(8171),w=r(2432),y=r(2896);function S(){let e=(0,i.useRouter)(),[t,r]=(0,a.useState)(null),[m,u]=(0,a.useState)(!1),[h,S]=(0,a.useState)(0),[k,E]=(0,a.useState)(new Set),[D,P]=(0,a.useState)(!1),{toast:C}=(0,N.dj)(),F=(0,a.useRef)(null);(0,a.useEffect)(()=>{t&&z()},[t]);let z=async()=>{if(t)try{let e=await (0,y.zm)(t);S(e)}catch(e){console.error("Error loading PDF:",e),C({title:"Error",description:"Failed to load PDF information",variant:"destructive"})}},A=()=>{t&&(0,y.n4)(t),r(null),S(0),E(new Set),F.current&&(F.current.value="")},R=e=>{let t=new Set(k);t.has(e)?t.delete(e):t.add(e),E(t)},B=async()=>{if(!t)return void C({title:"Error",description:"Please select a PDF file",variant:"destructive"});if(0===k.size)return void C({title:"Error",description:"Please select at least one page",variant:"destructive"});P(!0);try{let e=Array.from(k).sort((e,t)=>e-t),{blob:r,extractedCount:s}=await (0,v.$U)(t,e),a=window.URL.createObjectURL(r),i=document.createElement("a");i.href=a,i.download="split-pages-".concat(e.join("-"),".pdf"),document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(a),document.body.removeChild(i),C({title:"Success",description:"Successfully extracted ".concat(s," page(s)")})}catch(e){C({title:"Error",description:e instanceof Error?e.message:"Failed to split PDF. Please try again.",variant:"destructive"})}finally{P(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,s.jsx)(n.Y,{}),(0,s.jsxs)("main",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,s.jsx)(l.Q,{items:[{label:"Split PDF",href:"#"}]}),(0,s.jsxs)("div",{className:"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold mb-2",children:"Split PDF"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Extract specific pages from PDF"})]}),(0,s.jsxs)(d.$,{variant:"outline",onClick:()=>e.push("/"),"data-testid":"button-back",children:[(0,s.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Back"]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(c.Zp,{children:[(0,s.jsxs)(c.aR,{children:[(0,s.jsx)(c.ZB,{children:"Upload PDF File"}),(0,s.jsx)(c.BT,{children:"Select a PDF file to extract pages from"})]}),(0,s.jsxs)(c.Wu,{children:[(0,s.jsxs)("div",{className:"border-2 border-dashed rounded-md p-12 text-center transition-colors ".concat(m?"border-primary bg-primary/5":"border-border"),onDragOver:e=>{e.preventDefault(),u(!0)},onDragLeave:()=>{u(!1)},onDrop:e=>{e.preventDefault(),u(!1);let s=Array.from(e.dataTransfer.files).filter(e=>"application/pdf"===e.type);s.length>0&&(t&&(0,y.n4)(t),r(s[0]),E(new Set))},"data-testid":"dropzone-pdf",children:[(0,s.jsx)(p.A,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Drag and drop file here"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"or"}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{ref:F,type:"file",accept:".pdf,application/pdf",onChange:e=>{let s=Array.from(e.target.files||[]);s.length>0&&(t&&(0,y.n4)(t),r(s[0]),E(new Set)),F.current&&(F.current.value="")},className:"hidden","data-testid":"input-file"}),(0,s.jsx)(d.$,{variant:"outline",asChild:!0,children:(0,s.jsx)("span",{children:"Browse Files"})})]})]}),t&&(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h4",{className:"font-medium",children:"Selected File"}),(0,s.jsxs)(d.$,{size:"sm",variant:"ghost",onClick:A,"data-testid":"button-remove-file",children:[(0,s.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Remove"]})]}),(0,s.jsxs)("div",{className:"p-3 bg-muted rounded-md",children:[(0,s.jsx)("p",{className:"font-medium truncate","data-testid":"file-name",children:t.name}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]})(t.size)," â€¢ ",h," page",1!==h?"s":""]})]})]})]})]}),t&&h>0&&(0,s.jsxs)(c.Zp,{children:[(0,s.jsx)(c.aR,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(c.ZB,{children:"Select Pages"}),(0,s.jsxs)(c.BT,{children:["Choose pages to extract (",k.size," selected)"]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(d.$,{size:"sm",variant:"outline",onClick:()=>{let e=new Set;for(let t=1;t<=h;t++)e.add(t);E(e)},disabled:k.size===h,children:"Select All"}),(0,s.jsx)(d.$,{size:"sm",variant:"outline",onClick:()=>{E(new Set)},disabled:0===k.size,children:"Deselect All"})]})]})}),(0,s.jsxs)(c.Wu,{children:[h>20&&(0,s.jsxs)("div",{className:"mb-4 p-3 bg-muted rounded-md text-sm",children:[(0,s.jsxs)("p",{className:"font-medium",children:["Large document detected (",h," pages)"]}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Showing preview for first 20 pages only. Select pages below."})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:Array.from({length:Math.min(h,20)},(e,t)=>t+1).map(e=>(0,s.jsxs)("div",{className:"relative group cursor-pointer border-2 rounded-md p-2 transition-all ".concat(k.has(e)?"border-primary bg-primary/5 ring-2 ring-primary/20":"border-border hover:border-primary/50"),onClick:()=>R(e),"data-testid":"page-item-".concat(e),children:[(0,s.jsx)("div",{className:"absolute top-2 right-2 z-10",children:(0,s.jsx)(f,{checked:k.has(e),onCheckedChange:()=>R(e),className:"bg-background"})}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(w.A,{file:t,pageNumber:e,width:150,height:180,className:"mx-auto"})}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("p",{className:"text-xs font-medium",children:["Page ",e]})})]},e))}),h>20&&(0,s.jsxs)("div",{className:"mt-4 p-3 bg-muted rounded-md",children:[(0,s.jsx)("p",{className:"text-sm font-medium mb-2",children:"Select pages by number:"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-3",children:'Enter page numbers or ranges (e.g., "21-30,45,50-55" for pages beyond preview)'}),(0,s.jsx)(o.p,{placeholder:"e.g., 1,5,10-15,20",onKeyDown:e=>{if("Enter"===e.key){let t=e.currentTarget.value.split(",").map(e=>e.trim()),r=new Set(k);t.forEach(e=>{if(e.includes("-")){let[t,s]=e.split("-").map(e=>parseInt(e.trim()));if(!isNaN(t)&&!isNaN(s)&&t>0&&s<=h&&t<=s)for(let e=t;e<=s;e++)r.add(e)}else{let t=parseInt(e);!isNaN(t)&&t>0&&t<=h&&r.add(t)}}),E(r),e.currentTarget.value=""}}})]})]})]}),t&&k.size>0&&(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(d.$,{className:"flex-1",onClick:B,disabled:D,"data-testid":"button-split",children:D?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"Extract ",k.size," Page",1!==k.size?"s":""]})}),(0,s.jsx)(d.$,{variant:"outline",onClick:()=>{A()},disabled:D,"data-testid":"button-clear",children:"Clear"})]})]})]})]})}}},e=>{e.O(0,[489,545,211,519,949,661,441,255,358],()=>e(e.s=2761)),_N_E=e.O()}]);