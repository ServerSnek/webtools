(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[364],{733:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var a=r(5155),s=r(2115),l=r(63),n=r(1972),i=r(5209),c=r(3209),d=r(7003),o=r(5626),u=r(1786);let m=(0,r(1847).A)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var h=r(5229),x=r(5299),f=r(9867),g=r(8171),p=r(8728),j=r(2432),v=r(2896);function y(){let e=(0,l.useRouter)(),{toast:t}=(0,g.dj)(),[r,y]=(0,s.useState)([]),[b,w]=(0,s.useState)(!1),[N,k]=(0,s.useState)(!1),[D,F]=(0,s.useState)(null),P=()=>{F(null)},A=async()=>{if(r.length<2)return void t({title:"Error",description:"Please select at least 2 PDF files to merge",variant:"destructive"});k(!0);try{let e=await (0,p.Oo)(r),a=window.URL.createObjectURL(e),s=document.createElement("a");s.href=a,s.download="merged.pdf",document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(a),document.body.removeChild(s),t({title:"Success",description:"Successfully merged ".concat(r.length," PDFs")})}catch(e){t({title:"Error",description:"Failed to merge PDFs. Please try again.",variant:"destructive"})}finally{k(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)(n.Y,{}),(0,a.jsxs)("main",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,a.jsx)(i.Q,{items:[{label:"Merge PDF",href:"#"}]}),(0,a.jsxs)("div",{className:"mb-8 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold mb-2",children:"Merge PDF"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Combine multiple PDFs into one document"})]}),(0,a.jsxs)(d.$,{variant:"outline",onClick:()=>e.push("/"),"data-testid":"button-back",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Back"]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(c.Zp,{children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)(c.ZB,{children:"Upload PDF Files"}),(0,a.jsx)(c.BT,{children:"Select or drag and drop multiple PDF files to merge"})]}),(0,a.jsx)(c.Wu,{children:(0,a.jsxs)("div",{className:"border-2 border-dashed rounded-md p-12 text-center transition-colors ".concat(b?"border-primary bg-primary/5":"border-border"),onDragOver:e=>{e.preventDefault(),w(!0)},onDragLeave:()=>{w(!1)},onDrop:e=>{e.preventDefault(),w(!1);let t=Array.from(e.dataTransfer.files).filter(e=>"application/pdf"===e.type);y(e=>[...e,...t])},"data-testid":"dropzone-pdf",children:[(0,a.jsx)(u.A,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Drag and drop PDF files here"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"or"}),(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"file",accept:".pdf,application/pdf",multiple:!0,onChange:e=>{let t=Array.from(e.target.files||[]);y(e=>[...e,...t])},className:"hidden","data-testid":"input-file"}),(0,a.jsx)(d.$,{variant:"outline",asChild:!0,children:(0,a.jsx)("span",{children:"Browse Files"})})]})]})})]}),r.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.Zp,{children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsxs)(c.ZB,{children:["PDF Files (",r.length,")"]}),(0,a.jsx)(c.BT,{children:"Drag files to reorder them. The merged PDF will follow this sequence."})]}),(0,a.jsx)(c.Wu,{children:(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:r.map((e,t)=>(0,a.jsxs)("div",{draggable:!0,onDragStart:e=>{F(t),e.dataTransfer.effectAllowed="move"},onDragOver:e=>((e,t)=>{if(e.preventDefault(),e.dataTransfer.dropEffect="move",null===D||D===t)return;let a=[...r],s=a[D];a.splice(D,1),a.splice(t,0,s),y(a),F(t)})(e,t),onDragEnd:P,className:"relative group cursor-move border-2 rounded-md p-2 transition-all ".concat(D===t?"border-primary bg-primary/5 scale-105":"border-border hover:border-primary/50"),"data-testid":"pdf-item-".concat(t),children:[(0,a.jsx)("div",{className:"absolute top-1 left-1 z-10 bg-background/80 rounded p-1",children:(0,a.jsx)(m,{className:"h-4 w-4 text-muted-foreground"})}),(0,a.jsx)("div",{className:"absolute top-1 right-1 z-10",children:(0,a.jsx)(d.$,{size:"icon",variant:"ghost",className:"h-6 w-6 bg-background/80 hover:bg-destructive hover:text-destructive-foreground",onClick:()=>(e=>{let t=r[e];t&&(0,v.n4)(t),y(t=>t.filter((t,r)=>r!==e))})(t),"data-testid":"button-remove-".concat(t),children:(0,a.jsx)(h.A,{className:"h-3 w-3"})})}),(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)(j.A,{file:e,width:150,height:180,className:"mx-auto"})}),(0,a.jsxs)("div",{className:"absolute bottom-2 left-2 right-2 bg-background/90 rounded px-2 py-1",children:[(0,a.jsxs)("p",{className:"text-xs font-medium truncate","data-testid":"file-name-".concat(t),children:[t+1,". ",e.name]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:(e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]})(e.size)})]})]},t))})})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(d.$,{className:"flex-1",onClick:A,disabled:N||r.length<2,"data-testid":"button-merge",children:N?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Merging..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Merge ",r.length," PDFs"]})}),(0,a.jsx)(d.$,{variant:"outline",onClick:()=>y([]),disabled:N,"data-testid":"button-clear",children:"Clear All"})]})]})]})]})]})}},2421:(e,t,r)=>{Promise.resolve().then(r.bind(r,733))},2432:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(5155),s=r(2115),l=r(2896),n=r(5299);function i(e){let{file:t,pageNumber:r=1,width:i=150,height:c=200,className:d=""}=e,o=(0,s.useRef)(null),[u,m]=(0,s.useState)(!0),[h,x]=(0,s.useState)(null),{pdfDoc:f,loading:g,error:p}=(0,l.De)(t),j=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=!0;async function t(){if(f&&o.current)try{m(!0),x(null);let t=await f.getPage(r),a=o.current;if(!a||!e)return;let s=a.getContext("2d");if(!s)return;let l=t.getViewport({scale:1}),n=Math.min(i/l.width,c/l.height),d=t.getViewport({scale:n});a.width=d.width,a.height=d.height,j.current=t.render({canvasContext:s,viewport:d}),await j.current.promise,e&&m(!1)}catch(t){if((null==t?void 0:t.name)==="RenderingCancelledException")return;console.error("Error rendering PDF page:",t),e&&(x("Failed to render page"),m(!1))}}return f&&t(),()=>{if(e=!1,j.current)try{j.current.cancel()}catch(e){}}},[f,r,i,c]);let v=g||u,y=p||h;return(0,a.jsxs)("div",{className:"relative bg-muted rounded-md overflow-hidden ".concat(d),style:{width:i,height:c},children:[v&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)(n.A,{className:"h-6 w-6 animate-spin text-muted-foreground"})}),y&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center p-2",children:(0,a.jsx)("p",{className:"text-xs text-center text-destructive",children:y})}),(0,a.jsx)("canvas",{ref:o,className:"max-w-full max-h-full ".concat(v||y?"opacity-0":"opacity-100")})]})}},2896:(e,t,r)=>{"use strict";r.d(t,{De:()=>i,n4:()=>d,zm:()=>c});var a=r(2115);let s=new Map;function l(e){return"".concat(e.name,"-").concat(e.size,"-").concat(e.lastModified)}async function n(e,t){let{getPdfJs:a}=await Promise.resolve().then(r.bind(r,8728)),l=await a(),n=await e.arrayBuffer(),i=l.getDocument({data:n}),c=await i.promise,d=s.get(t);return d&&(d.document=c),c}function i(e){let[t,r]=(0,a.useState)(null),[i,c]=(0,a.useState)(null),[d,o]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let t=!0;return async function(){let a=l(e);try{o(!0),c(null);let l=s.get(a);l||(l={promise:n(e,a),document:null},s.set(a,l));let i=await l.promise;t&&(r(i),o(!1))}catch(e){console.error("Error loading PDF document:",e),console.error("Error details:",{message:e instanceof Error?e.message:String(e),stack:e instanceof Error?e.stack:void 0,name:e instanceof Error?e.name:void 0}),s.delete(a),t&&(c(e instanceof Error?e.message:"Failed to load PDF"),o(!1))}}(),()=>{t=!1}},[e]),{pdfDoc:t,loading:d,error:i}}async function c(e){let t=l(e),r=s.get(t);return r||(r={promise:n(e,t),document:null},s.set(t,r)),(await r.promise).numPages}function d(e){let t=l(e),r=s.get(t);if(null==r?void 0:r.document)try{r.document.destroy()}catch(e){}s.delete(t)}},5229:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5299:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9867:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])}},e=>{e.O(0,[489,545,211,519,661,441,255,358],()=>e(e.s=2421)),_N_E=e.O()}]);